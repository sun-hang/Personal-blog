(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31eb9b33"],{1545:function(t,e,a){"use strict";var n=a("51c2"),i=a.n(n);i.a},"1e3c":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[a("div",{staticClass:"title"},[t._v(" 发表评论 ")]),a("div",[a("input",{attrs:{type:"hidden",name:""},domProps:{value:t.parentUser}}),t.$store.state.isShow?a("button",{on:{click:t.quet}},[t._v("取消回复")]):t._e()]),a("div",{staticClass:"inputs"},[a("p",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",placeholder:"昵称"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),a("p",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"text",placeholder:"邮箱（评论被回复时你能收到通知）"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),a("p",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{cols:"30",rows:"10",placeholder:"无意义的内容我可能不会回复你的"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})]),a("p",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.verification,expression:"verification"}],staticClass:"verification",attrs:{type:"text",placeholder:"验证码"},domProps:{value:t.verification},on:{input:function(e){e.target.composing||(t.verification=e.target.value)}}}),a("img",{attrs:{src:"/api/captcha",alt:"",id:"captcha"},on:{click:t.imgCilck}})]),a("p",[a("button",{staticClass:"commit",on:{click:t.commit}},[t._v("提交留言")]),a("button",{staticClass:"reset",on:{click:t.reset}},[t._v("重置")])])])])},i=[],s=(a("b0c0"),a("d3b7"),{data:function(){return{name:"",email:"",comment:"",verification:"",parentUser:"",imgData:""}},props:["isShow"],mounted:function(){},methods:{reset:function(){this.name="",this.email="",this.comment="",this.verification=""},imgCilck:function(){document.getElementById("captcha").src="/api/captcha?a="+Math.random()},commit:function(){console.log(this.$route);var t=null;"About"===this.$route.name&&(t=-1),"Guestbook"===this.$route.name&&(t=-2),"Details"===this.$route.name&&(t=+this.$route.params.id);var e=this.$store.state.chatUser.parentUser,a=this.$store.state.chatUser.parentId,n=this.name,i=this.email,s=this.verification,c=this.comment;fetch("/api/comment",{method:"post",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({userName:n,parentName:e,captcha:s,content:c,email:i,parentid:a,blogid:t})}).then((function(t){return t.json()})).then((function(t){console.log(t)}))},quet:function(){this.$store.commit("getIsShow",!1),this.$store.commit("getChatUser",{parentUser:"管理员",parentId:-1})}}}),c=s,o=(a("2c2d"),a("2877")),r=Object(o["a"])(c,n,i,!1,null,null,null);e["a"]=r.exports},"273d":function(t,e,a){},"2c2d":function(t,e,a){"use strict";var n=a("273d"),i=a.n(n);i.a},"4aab":function(t,e,a){"use strict";var n=a("d130"),i=a.n(n);i.a},"51c2":function(t,e,a){},5748:function(t,e,a){"use strict";var n=a("a5c6"),i=a.n(n);i.a},8554:function(t,e,a){t.exports=a.p+"img/1.159050a5.jpg"},"9f52":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"wrapper"},[a("div",{staticClass:"nav"},[t._v(" 当前位置："),a("router-link",{attrs:{to:"/"}},[t._v("博客首页")]),t._v(" >> "),a("router-link",{attrs:{to:{name:"Home",query:{tag:t.blog.tag}}}},[t._v(t._s(t.blog.tag))]),t._v(" >> 阅读正文 ")],1),a("div",{staticClass:"title"},[a("h2",[a("a",{attrs:{href:""}},[t._v(t._s(t.blog.title))])]),t._v(" 作者："+t._s(t.blog.name)+"分类："+t._s(t.blog.tag)+"发布于："+t._s(t.date)+"浏览："+t._s(t.blog.views)+"评论："+t._s(t.comLen)+" ")]),a("div",{staticClass:"content",domProps:{innerHTML:t._s(t.blog.content)}})]),a("MessageWrapp",{attrs:{name:t.blog.title,num:t.comLen,datas:t.item}}),a("FandByPage",{attrs:{page:t.page,total:t.total,limit:t.limit,pNumber:t.pNumber},on:{click:t.change}}),a("Inputs")],1)},i=[],s=(a("99af"),a("fb6a"),a("d3b7"),a("96cf"),a("1da1")),c=a("5530"),o=a("4b07"),r=a("1e3c"),l=a("dc01"),m=a("ed08"),u=a("2f62"),p={data:function(){return{page:1,limit:10,pNumber:5,total:null,comLen:null,comment:[],name:"",item:[]}},components:{FandByPage:o["a"],MessageWrapp:l["a"],Inputs:r["a"]},computed:Object(c["a"])(Object(c["a"])({},Object(u["c"])(["blog"])),{},{date:function(){var t=new Date(1e3*this.blog.ctime),e=t.getFullYear(),a=+t.getMonth()+1,n=t.getDate();return"".concat(e,"年").concat(a,"月").concat(n,"日")}}),mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=parseInt(t.$route.params.id),e.next=3,fetch("/api/blog/"+a).then((function(t){return t.json()}));case 3:return n=e.sent,i=n.data[0].views+1,e.next=7,fetch("/api/blog/"+a,{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({views:i})}).then((function(t){return t.json()}));case 7:t.$store.dispatch("setBlog",a),Object(m["a"])(t,a,t.findByPageHandle);case 9:case"end":return e.stop()}}),e)})))()},methods:{change:function(t){this.page=t,this.findByPageHandle()},findByPageHandle:function(){var t=(this.page-1)*this.limit,e=t+this.limit,a=this.comment.slice(t,e);this.item=a}}},d=p,v=(a("5748"),a("2877")),h=Object(v["a"])(d,n,i,!1,null,null,null);e["default"]=h.exports},a5c6:function(t,e,a){},d130:function(t,e,a){},dc01:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper-msg"},[a("div",{staticClass:"title"},[t._v(t._s(t.name)+":目前有"+t._s(t.num)+"留言")]),a("div",{staticClass:"list"},t._l(t.datas,(function(t,e){return a("Message",{key:e,attrs:{item:t}})})),1)])},i=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"msg"},[n("div",{staticClass:"title"},[n("img",{attrs:{src:a("8554"),alt:""}}),n("span",[t._v(t._s(t.item.userName))]),t._v(":发表于"+t._s(t.date(t.item.ctime))),n("span",{staticClass:"chat",on:{click:function(e){return t.chatClick({parentUser:t.item.userName,parentId:t.item.id})}}},[t._v("[回复]")]),n("span",[t._v(t._s(t.item.parentName))])]),n("p",[t._v(t._s(t.item.content))]),t.item.children?n("div",{staticClass:"children"},t._l(t.item.children,(function(e,i){return n("div",{key:i,staticClass:"child-msg"},[n("div",{staticClass:"title"},[n("img",{attrs:{src:a("8554"),alt:""}}),n("span",[t._v(t._s(e.userName))]),t._v(":发表于"+t._s(t.date(e.ctime))),n("span",{staticClass:"chat",on:{click:function(a){return t.chatClick({parentUser:e.userName,parentId:t.item.id})}}},[t._v("[回复]")]),n("span",[t._v(t._s(e.parentName))])]),n("p",[t._v(t._s(e.content))])])})),0):t._e()])},c=[],o=(a("99af"),{name:"Message",props:["item"],computed:{},methods:{chatClick:function(t){this.$store.commit("getIsShow",!0),this.$store.commit("getChatUser",t)},date:function(t){var e=new Date(1e3*t),a=e.getFullYear(),n=+e.getMonth()+1,i=e.getDate(),s=e.getHours(),c=e.getMinutes(),o=e.getSeconds();return"".concat(a,"年").concat(n,"月").concat(i,"日").concat(s,"点").concat(c,"分").concat(o,"秒")}}}),r=o,l=(a("4aab"),a("2877")),m=Object(l["a"])(r,s,c,!1,null,null,null),u=m.exports,p={props:["name","datas","num"],components:{Message:u}},d=p,v=(a("1545"),Object(l["a"])(d,n,i,!1,null,null,null));e["a"]=v.exports}}]);
//# sourceMappingURL=chunk-31eb9b33.fea82bf2.js.map